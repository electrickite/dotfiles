#!/bin/sh
### Taken from u/StrangeAstronomer
### https://www.reddit.com/r/swaywm/comments/ljl0dh/keeping_secrets_secret_with_keepassxc_clipman_and/

pass_pid=$(ps -ax -o pid= -o ppid= -o command= | grep -i "[p]assword store sleep" | awk '{ print $2 }')
app_id=$(swaymsg -t get_tree | jq -r '.. | select(.type?) | select(.focused==true) | .app_id')

if [ "$app_id" != "org.keepassxc.KeePassXC" -a -z "$pass_pid" ]; then
  cliphist store
fi

